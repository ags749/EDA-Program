# 按钮捕捉组件

## 简单示例程序

```c++
#include <wx/wx.h> // 引入 wxWidgets 头文件

// MyApp 类是应用程序的主类
class MyApp : public wxApp {
public:
    // OnInit 方法在应用程序初始化时被调用
    virtual bool OnInit();
};

// MyFrame 类是主窗口的类
class MyFrame : public wxFrame {
public:
    MyFrame(const wxString& title); // 构造函数

private:
    void OnButtonClicked(wxCommandEvent& event); // 按钮点击事件处理函数

    wxTextCtrl* m_textCtrl; // 文本框指针
};

// 实现应用程序的入口
wxIMPLEMENT_APP(MyApp);

// OnInit 方法实现
bool MyApp::OnInit() {
    // 创建 MyFrame 对象（主窗口），标题为“简单的 wxWidgets 示例”
    MyFrame* frame = new MyFrame("简单的 wxWidgets 示例");
    frame->Show(true); // 显示窗口
    return true; // 返回 true 表示初始化成功
}

// MyFrame 构造函数实现
MyFrame::MyFrame(const wxString& title)
    : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(300, 200)) { // 调用基类构造函数
    wxPanel* panel = new wxPanel(this, wxID_ANY); // 创建一个面板

    // 创建一个文本框，初始内容为“在这里显示消息”
    m_textCtrl = new wxTextCtrl(panel, wxID_ANY, "在这里显示消息", wxPoint(20, 20), wxSize(240, 25));

    // 创建一个按钮，标记为“点击我”
    wxButton* button = new wxButton(panel, wxID_ANY, wxT("点击我"), wxPoint(20, 60));
    
    // 绑定按钮点击事件到 OnButtonClicked 方法
    button->Bind(wxEVT_BUTTON, &MyFrame::OnButtonClicked, this);
}

// 按钮点击事件处理函数
void MyFrame::OnButtonClicked(wxCommandEvent& event) {
    // 当按钮被点击时，设置文本框的内容
    m_textCtrl->SetValue("你好，欢迎使用 wxWidgets!");
}
```

## 按钮捕捉动作

```c++
#include <wx/wx.h>

class MyApp : public wxApp {
public:
    virtual bool OnInit();
};

class MyFrame : public wxFrame {
public:
    MyFrame(const wxString& title);

private:
    void OnButtonClicked(wxCommandEvent& event);
    void OnButtonReleased(wxCommandEvent& event);
    void OnCheckBoxChanged(wxCommandEvent& event);

    wxButton* m_button;            // 按钮指针
    wxStaticText* m_label;         // 标签指针
    wxCheckBox* m_checkBox;        // 复选框指针
    bool m_captured;                // 用于跟踪按钮是否被捕获
};

wxIMPLEMENT_APP(MyApp);

bool MyApp::OnInit() {
    MyFrame* frame = new MyFrame("捕捉按钮的 wxWidgets 示例");
    frame->Show(true);
    return true;
}

MyFrame::MyFrame(const wxString& title)
    : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(300, 200)), m_captured(false) {

    wxPanel* panel = new wxPanel(this, wxID_ANY);

    m_button = new wxButton(panel, wxID_ANY, wxT("点击我"), wxPoint(20, 20));

    // 标签，初始文本为“请选中复选框以使其可见”
    m_label = new wxStaticText(panel, wxID_ANY, wxT("请选中复选框以使其可见"), wxPoint(20, 60));

    // 复选框
    m_checkBox = new wxCheckBox(panel, wxID_ANY, wxT("显示标签"), wxPoint(20, 100));
    m_checkBox->Bind(wxEVT_CHECKBOX, &MyFrame::OnCheckBoxChanged, this); // 绑定复选框的变化事件

    // 绑定按钮点击和释放事件
    m_button->Bind(wxEVT_BUTTON, &MyFrame::OnButtonClicked, this);
    m_button->Bind(wxEVT_LEFT_UP, &MyFrame::OnButtonReleased, this);
}

void MyFrame::OnButtonClicked(wxCommandEvent& event) {
    if (!m_captured) {
        m_button->SetLabel("按钮已捕获");
        m_captured = true; // 设置为捕获状态
    }
}

void MyFrame::OnButtonReleased(wxCommandEvent& event) {
    if (m_captured) {
        m_button->SetLabel("点击我");
        m_captured = false; // 重置为未捕获状态
    }
}

// 复选框变化事件处理
void MyFrame::OnCheckBoxChanged(wxCommandEvent& event) {
    if (m_checkBox->IsChecked()) {
        m_label->Show(); // 如果复选框选中，显示标签
    } else {
        m_label->Hide(); // 否则隐藏标签
    }
    Layout(); // 更新布局
}
```

## 嵌套页面

```c++
#include <wx/wx.h>  // 引入 wxWidgets 头文件

// 结果窗口类
class ResultFrame : public wxFrame {
public:
    // 构造函数，设置窗口标题和大小
    ResultFrame(const wxString& title)
        : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(200, 100)) {
        
        wxPanel* panel = new wxPanel(this, wxID_ANY);  // 创建一个面板
        // 创建一个静态文本控件，用于显示结果
        wxStaticText* text = new wxStaticText(panel, wxID_ANY, "结果页面", wxPoint(20, 20));
    }
};

// 弹出窗口类
class PopupFrame : public wxFrame {
public:
    // 构造函数，设置窗口标题和大小
    PopupFrame(const wxString& title)
        : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(200, 150)) {
        
        wxPanel* panel = new wxPanel(this, wxID_ANY);  // 创建一个面板
        
        // 创建第一个按钮，并绑定点击事件到 OnButtonResult 方法
        wxButton* button1 = new wxButton(panel, wxID_ANY, "弹出结果", wxPoint(20, 20));
        button1->Bind(wxEVT_BUTTON, &PopupFrame::OnButtonResult, this);
        
        // 创建第二个按钮，并绑定点击事件到 OnClose 方法
        wxButton* button2 = new wxButton(panel, wxID_ANY, "关闭", wxPoint(20, 60));
        button2->Bind(wxEVT_BUTTON, &PopupFrame::OnClose, this);
    }

private:
    // 按钮点击事件处理函数，弹出结果窗口
    void OnButtonResult(wxCommandEvent& event) {
        ResultFrame* resultFrame = new ResultFrame("结果");  // 创建结果窗口
        resultFrame->Show(true);  // 显示结果窗口
    }

    // 按钮点击事件处理函数，关闭当前弹出窗口
    void OnClose(wxCommandEvent& event) {
        Close(true);  // 关闭窗口
    }
};

// 主窗口类
class MainFrame : public wxFrame {
public:
    // 构造函数，设置窗口标题和大小
    MainFrame(const wxString& title)
        : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(300, 200)) {
        
        wxPanel* panel = new wxPanel(this, wxID_ANY);  // 创建一个面板
        
        // 创建第一个按钮，并绑定点击事件到 OnButtonPopup1 方法
        wxButton* button1 = new wxButton(panel, wxID_ANY, "弹出窗口 1", wxPoint(20, 20));
        button1->Bind(wxEVT_BUTTON, &MainFrame::OnButtonPopup1, this);
        
        // 创建第二个按钮，并绑定点击事件到 OnButtonPopup2 方法
        wxButton* button2 = new wxButton(panel, wxID_ANY, "弹出窗口 2", wxPoint(20, 60));
        button2->Bind(wxEVT_BUTTON, &MainFrame::OnButtonPopup2, this);
    }

private:
    // 按钮点击事件处理函数，弹出 PopupFrame
    void OnButtonPopup1(wxCommandEvent& event) {
        PopupFrame* popupFrame = new PopupFrame("弹出窗口 1");  // 创建弹出窗口
        popupFrame->Show(true);  // 显示弹出窗口
    }

    // 按钮点击事件处理函数，处理弹出窗口 2 的逻辑
    void OnButtonPopup2(wxCommandEvent& event) {
        wxMessageBox("点击了弹出窗口 2 按钮");  // 弹出消息框
    }
};

// 应用程序类
class MyApp : public wxApp {
public:
    // 初始化应用程序
    virtual bool OnInit() {
        MainFrame* frame = new MainFrame("主窗口");  // 创建主窗口
        frame->Show(true);  // 显示主窗口
        return true;  // 返回 true 表示初始化成功
    }
};

// 程序入口点
wxIMPLEMENT_APP(MyApp);  // 实现应用程序
```

